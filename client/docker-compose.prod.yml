version: '3.8'

# List of used networks
networks:
  # The client network
  client:
    name: client
    driver: overlay

  # The API network
  api:
    name: api
    driver: overlay

# List of used services
services:
  # The client application container
  app:
    build:
      context: ./
      dockerfile: ./.docker/prod/app/Dockerfile
    image: ${IMAGE_REGISTRY:-local}/client-app:${IMAGE_TAG:-latest}
    hostname: client
    networks:
      - client
      - api
    restart: unless-stopped
